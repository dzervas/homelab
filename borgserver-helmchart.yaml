---
apiVersion: v1
kind: Namespace
metadata:
  name: borgserver

---
apiVersion: helm.cattle.io/v1
kind: HelmChart
metadata:
  name: borgserver-helmchart
  namespace: kube-system
  labels:
    logme: "true"
spec:
  chart: borgserver
  repo: https://dzervas.github.io/docker-borgserver/
  version: 1.2.3-27
  targetNamespace: borgserver
  valuesContent: |-
    borg:
      useKeysSecret: true
    persistence:
      size: 200Gi
      storageClass: longhorn
    # replicaCount: 2
    clients:
      - name: dzervas-desktop
        restrictToPaths:
          - /backup/dzervas-desktop
        type: ssh-ed25519
        key: AAAAC3NzaC1lZDI1NTE5AAAAICS1ajO167YXmPzlWZT6+ydcO359SW1BljPK/GgBijHZ
      - name: dzervas-hass
        restrictToPaths:
          - /backup/dzervas-hass
        type: ssh-ed25519
        key: AAAAC3NzaC1lZDI1NTE5AAAAIMLWVHQrJocAcyOhl8K8zOIqt1yPx0edICvEgBMyqpiT
